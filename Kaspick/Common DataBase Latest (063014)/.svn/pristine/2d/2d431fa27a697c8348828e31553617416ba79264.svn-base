

IF EXISTS (SELECT *
           FROM   sysobjects 
           WHERE  type = 'P'
                  AND name = 'USP_EX_GetWftAdditionalDonatedAsssetsDetail')
    BEGIN
        DROP PROCEDURE USP_EX_GetWftAdditionalDonatedAsssetsDetail;
        PRINT 'DROPPED USP_EX_GetWftAdditionalDonatedAsssetsDetail';
    END
GO

/****************************************************************************** 
** Name  : USP_EX_GetWftAdditionalDonatedAsssetsDetail  
** Old Name: [sp_wft_get_additional_donated_asssets_detail] 
** Short Desc:   
**  
** Full Description  
**        This stored proc is used to populate Additional Donated Assets detail  
**  
** Sample Call  
 [sp_wft_get_additional_donated_asssets_detail]  
**  
** Return values:   
**  
**  
** Standard declarations  
**       SET NOCOUNT             ON  
**       SET LOCK_TIMEOUT         30000   -- 30 seconds  
**   
** Created By: Soorya  
** Company   : Kaspick & Company  
** Project   : Excelsior WFT  
** Created DT: 09-April-2010  
**              
*******************************************************************************  
**       Change History  
*******************************************************************************  
** Date:        Author:  Bug #     Description:                           Rvwd  
** --------     -------- ------    -------------------------------------- --------  
**  02/06/2014	Mallikarjun		SP Name Renamed and Formatted
*******************************************************************************  
** Copyright (C) <CopyrightYear,,Year> Kaspick & Company, All Rights Reserved  
** COMPANY CONFIDENTIAL -- NOT FOR DISTRIBUTION  
*******************************************************************************/  
  
CREATE PROCEDURE [dbo].[USP_EX_GetWftAdditionalDonatedAsssetsDetail]  
(  
 @Guid varchar(255)  
)    
AS   
SELECT  
 additional_donated_assets_id  
 ,form_id  
 ,guid  
 ,is_revised_submission  
 ,revision_date  
 ,notification_date  
 ,AddDonAsst.ManagerCode AS client_id  
 ,ManagerCodeName AS client_name  
 ,AccMstr.CustomerAccountNumber AS account_id  
 ,AccMstr.CustomerAccountNumber AS advent_id  
 ,AccMstr.ExternalCustomerID AS account_number  
 ,account_name  
 ,account_type  
 ,beneficiary_name  
 ,AddDonAsst.comments  
 ,asset_delivery_arrival  
 ,expected_asset_arrival_date  
 ,gift_date  
 ,asset_type4  
 ,asset_type3  
 ,asset_type2  
 ,asset_type1  
 ,ticker_symbol4  
 ,ticker_symbol3  
 ,ticker_symbol2  
 ,ticker_symbol1  
 ,price_source4  
 ,price_source3  
 ,price_source2  
 ,price_source1  
 ,number_of_share4  
 ,number_of_share3  
 ,number_of_share2  
 ,number_of_share1  
 ,high_price4  
 ,high_price3  
 ,high_price2  
 ,high_price1  
 ,donors_date_of_acquisition4  
 ,donors_date_of_acquisition3  
 ,donors_date_of_acquisition2  
 ,donors_date_of_acquisition1  
 ,low_price4  
 ,low_price3  
 ,low_price2  
 ,low_price1  
 ,long_term_holding4  
 ,long_term_holding3  
 ,long_term_holding2  
 ,long_term_holding1  
 ,average_price4  
 ,average_price3  
 ,average_price2  
 ,average_price1  
 ,donors_cost_basis4  
 ,donors_cost_basis3  
 ,donors_cost_basis2  
 ,donors_cost_basis1  
 ,zero_cost_basis1  
 ,zero_cost_basis2  
 ,zero_cost_basis3  
 ,zero_cost_basis4  
 ,asset_value4  
 ,asset_value3  
 ,asset_value2  
 ,asset_value1  
 ,delivery_method4  
 ,delivery_method3  
 ,delivery_method2  
 ,delivery_method1  
 ,asset_description4  
 ,asset_description3  
 ,asset_description2  
 ,asset_description1  
 ,hidden_asset_restore1  
 ,hidden_asset_restore2  
 ,hidden_asset_restore3  
 ,hidden_asset_restore4  
 ,total_asset_value  
 ,total_cost_basis  
 ,org_userid  
 ,org_useremail  
 ,org_username  
 ,pxy_userid  
 ,pxy_username  
 ,pxy_useremail  
 ,trust_administrator  
 ,client_manager  
 ,modified  
 ,modified_by  
 ,submitted_by  
 ,team_folder_name  
 ,fax_investment_directive  
 ,fax_broker_confirm_trade  
 ,fax_asset_appraisal  
FROM [TBL_WFT_AdditionalDonatedAssset] AddDonAsst  
 inner join SYN_IT_AccountMaster AccMstr on AccMstr.CustomerAccountNumber = AddDonAsst.CustomerAccountNumber  
 WHERE Guid = @Guid
 
 
 	
GO
  IF EXISTS (	SELECT *
			FROM sysobjects
			WHERE type = 'P'
			AND name = 'USP_EX_GetWftAdditionalDonatedAsssetsDetail') 
	BEGIN
			PRINT 'CREATED PROCEDURE USP_EX_GetWftAdditionalDonatedAsssetsDetail';
	END
	
	