IF EXISTS (
		SELECT 1
		FROM sys.objects
		WHERE object_id = OBJECT_ID(N'[dbo].[USP_TR_GetAllTrader]')
			AND type IN (
				N'P'
				,N'PC'
				)
		)
	DROP PROCEDURE [dbo].[USP_TR_GetAllTrader]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

/******************************************************************************      
** Name   :   USP_TR_GetAllTrader      
** Short Desc : Get all Trader from table TBL_KS_User 
**      
** Full Description : Get all Trader from table TBL_KS_User
*              
**      
** Sample Call 
   EXEC USP_TR_GetAllTrader
 
**      
** Return values: NONE      
**      
**      
** Standard declarations      
**       SET LOCK_TIMEOUT         30000   -- 30 seconds      
**       
** Created By :		Chaithra Madappa
** Company  :		Kaspick & Company      
** Project  :		Back Office Integration (T-Rex)     
** Created DT :		Feb/10/2014    
**                  
*******************************************************************************      
**       Change History      
*******************************************************************************      
** Date:        Author:  Bug #     Description:                           Rvwd      
** --------     -------- ------    -------------------------------------- --------      
**                                 Created    
** 26-jun-14   Salih               Modified Rolecode implementation from Rolecode description to ID.
******************************************************************************      
** Copyright (C) 2007 Kaspick & Company, All Rights Reserved      
** COMPANY CONFIDENTIAL -- NOT FOR DISTRIBUTION      
*******************************************************************************/
CREATE PROCEDURE [dbo].[USP_TR_GetAllTrader]
AS
BEGIN
	SET NOCOUNT ON;
	SET LOCK_TIMEOUT 30000;-- 30 seconds    

	SELECT DISTINCT Usr.[USERID]
		,Usr.INITIALS
	FROM TBL_KS_User Usr
	INNER JOIN SYN_IT_SubContactRoles SubCntRol
		ON SubCntRol.SubContactID = Usr.InnotrustContactID
			-- 26-jun-2014  Salih: Modified Rolecode implementation from Rolecode description to ID.
			AND SubCntRol.ContactRoleCode = 515 -- 'Portfolio Analyst'
END
GO


