<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:db="http://www.springframework.net/database"
  xsi:schemaLocation="http://www.springframework.net http://www.springframework.net/xsd/spring-objects.xsd">

	<import resource="assembly://MGI.Cxn.Fund.Visa/MGI.Cxn.Fund.Visa/MGI.Cxn.Fund.Visa.Db.Spring.xml"/>
	<import resource="assembly://MGI.Common/MGI.Common/MGICommon.xml" />

	<object id="CxnFundsVisaProcessor" type="MGI.Cxn.Fund.Visa.Impl.Gateway, MGI.Cxn.Fund.Visa">
		<property name="TransactionRepo" ref="VisaTransactionRepo" />
		<property name="AccountRepo" ref="VisaAccountRepo" />
		<property name="CredentialRepo" ref="VisaCredentialRepo" />
		<property name="VisaShippingFeeRepo" ref="VisaShippingFeeRepo" />
		<property name="CardClassRepo" ref="CardClassRepo" />
		<property name="ChannelPartnerShippingTypeRepo" ref="ChannelPartnerShippingTypeRepo" />
		<property name="ChannelPartnerFeeTypeRepo" ref="ChannelPartnerFeeTypeRepo" />
		<property name="VisaFeeTypeRepo" ref="VisaFeeTypeRepo" />
		<property name="VisaFeeRepo" ref="VisaFeeRepo" />		
		<property name="IO" ref="VisaIO"/>
		<property name="DataProtectionService" ref="CXNFundsDataProtection${DataProtectionService}"/>
		<property name="MongoDBLogger" ref="TLoggerRef"/>
	</object>

	<object id="VisaTransactionRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.Transaction&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>

	<object id="VisaAccountRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.Account&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>

	<object id="VisaCredentialRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.Credential&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>

	<object id="VisaShippingFeeRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.VisaShippingFee&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>

	<object id="CardClassRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.CardClass&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>
	<object id="ChannelPartnerShippingTypeRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.ChannelPartnerShippingTypeMapping&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>


	<object id="ChannelPartnerFeeTypeRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.ChannelPartnerFeeTypeMapping&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>

	<object id="VisaFeeTypeRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.VisaFeeTypes&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>
	<object id="VisaFeeRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Fund.Visa.Data.VisaFee&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="SessionFactoryCxnVisa"></property>
	</object>
	<object id="VisaIO" type ="MGI.Cxn.Fund.Visa.Impl.${ProviderIO}, MGI.Cxn.Fund.Visa">
		<property name="MongoDBLogger" ref="TLoggerRef"/>
	</object>

	<object id="CXNFundsDataProtectionSimulator" type="MGI.Common.DataProtection.Impl.DataProtectionSimulator, MGI.Common.DataProtection"/>
	<object id="CXNFundsDataProtectionService" type="MGI.Common.DataProtection.Impl.DataProtectionService, MGI.Common.DataProtection"/>
</objects>
