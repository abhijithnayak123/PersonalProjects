<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="MGI.Core.Partner"
                   namespace="MGI.Core.Partner.Data">
  <class name="Customer" table="tPartnerCustomers">
    <id name="rowguid" column="CustomerPK">
      <generator class="guid"/>
    </id>
    <property name="Id" column="CustomerID"/>
    <property name="CXEId"/>
    <bag name="Accounts" cascade="all-delete-orphan" lazy="false">
      <key column="CustomerPK"/>
      <one-to-many class="Account"/>
    </bag>
	<property name="AgentSessionId" column="AgentSessionPK"/>
    <property name="IsPartnerAccountHolder"/>
    <property name="ReferralCode"/>
    <property name="ChannelPartnerId" column="ChannelPartnerPK"/>
    <property name="DTServerCreate" not-null="true" update="false"/>
    <property name="DTServerLastModified" not-null="false" insert="false"/>
    <property name="CustomerProfileStatus" />
    <bag name="Groups" inverse="true" cascade="all-delete-orphan" lazy="false">
      <key column="PartnerCustomerPK"/>
      <one-to-many class="CustomerGroupSetting"/>
    </bag>
	<many-to-one insert="false" update="false" lazy="false" name="ChannelPartner">
		<column name="ChannelPartnerPK" sql-type="uniqueidentifier" not-null="true" />
	</many-to-one>
		<property name="DTTerminalCreate" column="DTTerminalCreate" not-null="true" update="false"/>
		<property name="DTTerminalLastModified" column="DTTerminalLastModified" not-null="false" />
  </class>
  
  <class name="CustomerGroupSetting" table="tPartnerCustomerGroupSettings">
    <id name="rowguid" column="PCGroupSettingPK">
      <generator class="guid"/>
    </id>
    <many-to-one name="customer" class="Customer" column="PartnerCustomerPK" />
	<many-to-one name="channelPartnerGroup" class="ChannelPartnerGroup" column="ChannelPartnerGroupPK" />
    <property name="channelPartnerGroupId" column="ChannelPartnerGroupId" />
    <property name="DTServerCreate" not-null="true" update="false"/>
    <property name="DTServerLastModified" not-null="false" insert="false"/>
		<property name="DTTerminalCreate" column="DTTerminalCreate" not-null="true" update="false"/>
		<property name="DTTerminalLastModified" column="DTTerminalLastModified" not-null="false" />
	</class>  
</hibernate-mapping>
