<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net"
				 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
				 xmlns:db="http://www.springframework.net/database"
				 xsi:schemaLocation="http://www.springframework.net http://www.springframework.net/xsd/spring-objects.xsd">

	<import resource="assembly://MGI.Core.CXE/MGI.Core.CXE/CXESpring.xml"/>
	<import resource="assembly://MGI.Core.Catalog/MGI.Core.Catalog/Core.Catalog.Services.Spring.xml"/>
	<import resource="assembly://MGI.Cxn.BillPay.WU/MGI.Cxn.BillPay.WU/MGI.Cxn.BillPay.WU.Impl.Spring.xml"/>
	<import resource="assembly://MGI.Core.Partner/MGI.Core.Partner/Core.Partner.Services.Spring.xml"/>

	<object id="ThrowsBizBillPayExceptionAdvice" type="MGI.Biz.BillPay.Impl.Advice.ThrowsBizBillPayExceptionAdvice, MGI.Biz.BillPay"/>

	<object id="InterceptedBizBillPayService" type="MGI.Biz.BillPay.Impl.BillPayServiceImpl, MGI.Biz.BillPay">
		<property name="CXEBillPayService" ref="CXEBillPayService" />
		<property name="CXEAccountService" ref="AccountService" />
		<property name="CXEBillPaySetup" ref="CXEBillPaySetup" />
		<property name="CustomerService" ref="CXECustomerService" />
		<property name="ProductService" ref="ProductService" />
		<property name="PRTNRBillSvc" ref="BillPayService"/>
		<property name="PTNRCustomerService" ref="Core.Partner.CustomerService"/>
		<property name="SessionSvc" ref="CustomerSessionService"/>
		<property name="ProcessorRouter" ref="BillPayProcessorRouter"/>
		<property name="CoreChannelPartnerService" ref="CorePartnerChannelPartnerService" />
		<property name="PTNRDataStructureService" ref="CoreNexxoDataStructuresService"/>
		<property name="MongoDBLogger" ref="TLoggerRef"/>
		<property name="FeeSvc" ref="PartnerFeeService"/>
		<property name="LimitService" ref="BIZLimitService" />
		<property name="LocationCounterIdService" ref="CorePartnerLocationCounterIdService"></property>
		<property name="CustomerSessionCounterIdService" ref="CustomerSessionCounterIdService"></property>
		<property name="BPDataProtectionSvc" ref="CXNBPDataProtection${DataProtectionService}"/>
		<property name="IsHardCodedCounterId" value="${IsHardCodedCounterId}" />
		<property name="MongoDBLogger" ref="TLoggerRef"/>
	</object>

	<!-- The BillPay Processors -->
	<object id="BillPayProcessorRouter" type="MGI.Cxn.Common.Processor.Util.ProcessorRouter, MGI.Cxn.Common">
		<property name="ParentProcessors">
			<object id="BillPayProcessorsDictionary" type="System.Collections.Generic.Dictionary&lt;string, System.Collections.Generic.Dictionary&lt;string,MGI.Cxn.Common.Processor.Contract.IProcessor&gt;&gt;, mscorlib">
				<constructor-arg>
					<dictionary key-type="string" value-type="System.Collections.Generic.Dictionary&lt;string,MGI.Cxn.Common.Processor.Contract.IProcessor&gt;">
						<entry key="Synovus">
							<dictionary key-type="string" value-type="MGI.Cxn.Common.Processor.Contract.IProcessor">
								<entry key="WesternUnionBillPay">
									<ref object="WesternUnionGateway"/>
								</entry>
							</dictionary>
						</entry>
						<entry key="Carver">
							<dictionary key-type="string" value-type="MGI.Cxn.Common.Processor.Contract.IProcessor">
								<entry key="WesternUnionBillPay">
									<ref object="WesternUnionGateway"/>
								</entry>
							</dictionary>
						</entry>
						<entry key="TCF">
							<dictionary key-type="string" value-type="MGI.Cxn.Common.Processor.Contract.IProcessor">
								<entry key="WesternUnionBillPay">
									<ref object="WesternUnionGateway"/>
								</entry>
							</dictionary>
						</entry>
						<entry key="Redstone">
							<dictionary key-type="string" value-type="MGI.Cxn.Common.Processor.Contract.IProcessor">
								<entry key="MoneyGramBillPay">
									<ref object="MoneyGramGateway"/>
								</entry>
							</dictionary>
						</entry>
					</dictionary>
				</constructor-arg>
			</object>
		</property>

		<property name="Providers">
			<object id="MoneyTransferProvidersDictionary" type="System.Collections.Generic.Dictionary&lt;string, string&gt;, mscorlib">
				<constructor-arg>
					<dictionary key-type="string" value-type="string">
						<entry key="Synovus">
							<value type="string">WesternUnion</value>
						</entry>
						<entry key="Carver">
							<value type="string">WesternUnion</value>
						</entry>
						<entry key="TCF">
							<value type="string">MoneyGram</value>
						</entry>
						<entry key="Redstone">
							<value type="string">MoneyGram</value>
						</entry>
					</dictionary>
				</constructor-arg>
			</object>
		</property>
	</object>


	<object id="BizBillPayService" type="Spring.Aop.Framework.ProxyFactoryObject, Spring.Aop">
		<property name="Target" ref="InterceptedBizBillPayService"/>
		<property name="InterceptorNames">
			<list>
				<value>ThrowsBizBillPayExceptionAdvice</value>
			</list>
		</property>
	</object>
	<object id="CXNBPDataProtectionSimulator" type="Nexxo.Common.DataProtection.Impl.DataProtectionSimulator, Nexxo.Common.DataProtection"/>
	<object id="CXNBPDataProtectionService" type="Nexxo.Common.DataProtection.Impl.DataProtectionService, Nexxo.Common.DataProtection"/>
</objects>
