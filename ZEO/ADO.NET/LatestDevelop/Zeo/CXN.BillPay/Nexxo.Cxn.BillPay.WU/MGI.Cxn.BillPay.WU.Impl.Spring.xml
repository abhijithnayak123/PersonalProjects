<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xmlns:db="http://www.springframework.net/database"
		 xmlns:tx="http://www.springframework.net/tx"
		 xsi:schemaLocation="http://www.springframework.net http://www.springframework.net/xsd/spring-objects.xsd">

	<object id="transactionManager"
	  type="Spring.Data.Core.TxScopeTransactionManager, Spring.Data">
		<property name="TransactionSynchronization" value="Always"/>
	</object>

	<tx:attribute-driven/>

	<import resource="assembly://MGI.Cxn.BillPay.WU/MGI.Cxn.BillPay.WU/MGI.Cxn.BillPay.WU.Db.Spring.xml"/>
	<import resource="assembly://MGI.Cxn.WU.Common/MGI.Cxn.WU.Common/MGI.Cxn.WU.Common.Services.Spring.xml"/>

	<object id="WesternUnionGateway" type ="MGI.Cxn.BillPay.WU.Impl.WesternUnionGateway, MGI.Cxn.BillPay.WU">
		<property name="WesternUnionIO" ref="WesternUnionIO" />
		<property name="WUBillPayIO" ref="WUBillPayIO" />
		<property name="ProcessorDAL" ref="ProcessorDAL" />
    	<property name="BPDataProtectionSvc" ref="CXNBPDataProtection${DataProtectionService}"/>
    	<property name="IsHardCodedCounterId" value="${IsHardCodedCounterId}" />
		<property name="MongoDBLogger" ref="TLoggerRef"/>
	</object>

	<object id="WUBillPayIO" type="MGI.Cxn.BillPay.WU.Impl.${ProviderIO}, MGI.Cxn.BillPay.WU">
		<property name="WesternUnionIO" ref="WesternUnionIO" />
		<property name="ProcessorDAL" ref="ProcessorDAL" />
		<property name="AllowDuplicateTrxWU" value="${AllowDuplicateTrxWU}"/>
    <property name="BPDataProtectionSvc" ref="CXNBPDataProtection${DataProtectionService}"/>
		<property name="MongoDBLogger" ref="TLoggerRef"/>
    <property name="ExceptionHelper" ref="BPExceptionHelper"/>
	</object>
	
  <object id="BPExceptionHelper" type="MGI.Cxn.BillPay.WU.Data.BillpayProviderException, MGI.Cxn.BillPay.WU"></object>
  
	<object id="ProcessorDAL" type="MGI.Cxn.BillPay.WU.Impl.ProcessorDAL, MGI.Cxn.BillPay.WU">
		<property name="WesternUnionAccountRepo" ref="WesternUnionAccountRepo" />
		<property name="WesternUnionTrxRepo" ref="WesternUnionTrxRepo" />
		<property name="WesternUnionImportBillersRepo" ref="WesternUnionImportBillersRepo" />
	</object>

	<object id="WesternUnionAccountRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.BillPay.WU.Data.WesternUnionAccount&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="Cxn.WU.BP.SessionFactory"></property>
	</object>

	<object id="WesternUnionTrxRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.BillPay.WU.Data.WesternUnionTrx&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="Cxn.WU.BP.SessionFactory"></property>
	</object>

	<object id="WesternUnionImportBillersRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.BillPay.WU.Data.ImportedBiller&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="Cxn.WU.BP.SessionFactory"></property>
	</object>
  <object id="CXNBPDataProtectionSimulator" type="MGI.Common.DataProtection.Impl.DataProtectionSimulator, MGI.Common.DataProtection"/>
  <object id="CXNBPDataProtectionService" type="MGI.Common.DataProtection.Impl.DataProtectionService, MGI.Common.DataProtection"/>
</objects>
