<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="MGI.Core.Partner"
                   namespace="MGI.Core.Partner.Data">
	<!--
    Mapping for Prospect & associated tables (almost identical to CustomerProfile,
    needed so we can have separate tables)
  -->
	<class name="Prospect" table="tProspects">
		<id name="id" unsaved-value="00000000-0000-0000-0000-000000000000" column="ProspectPK">
			<generator class="guid"/>
		</id>
		<property name="AlloyID">
			<column name="PAN" sql-type="bigint" not-null="false" />
		</property>
		<property name="FirstName"/>
		<property name="MiddleName"/>
		<property name="LastName"/>
		<property name="LastName2"/>
		<property name="MothersMaidenName"/>
		<property name="DateOfBirth">
			<column name="DOB" sql-type="datetime" not-null="false" />
		</property>
		<property name="Address1"/>
		<property name="Address2"/>
		<property name="City"/>
		<property name="State"/>
		<property name="ZipCode"/>
		<property name="Phone1"/>
		<property name="Phone1Type"/>
		<property name="Phone1Provider"/>
		<property name="Phone2"/>
		<property name="Phone2Type"/>
		<property name="Phone2Provider"/>
		<property name="SSN"/>
		<property name="TaxpayerId"/>
		<property name="DoNotCall"/>
		<property name="SMSEnabled"/>
		<property name="MarketingSMSEnabled"/>
		<property name="ChannelPartnerId" column="ChannelPartnerPK"/>
		<property name="DTServerCreate" update="false"/>
		<property name="DTServerLastModified" not-null="false" insert="false"/>
		<property name="Gender"/>
		<property name="Email"/>
		<property name="IsAccountHolder"/>
		<property name="ReferralCode"/>
		<property name="PIN"/>
		<property name="MailingAddressDifferent" column="IsMailingAddressDifferent" />
		<property name="MailingAddress1"/>
		<property name="MailingAddress2"/>
		<property name="MailingCity"/>
		<property name="MailingState"/>
		<property name="MailingZipCode"/>
		<property name="ReceiptLanguage"/>
		<property name="ProfileStatus"/>
		<property name="CountryOfBirth"/>
		<property name="ClientID"/>
		<property name="LegalCode"/>
		<property name="PrimaryCountryCitizenShip"/>
		<property name="SecondaryCountryCitizenShip"/>
		<property name="IDCode"/>
		<one-to-one name="GovernmentId" class="ProspectGovernmentId" constrained="false" cascade="all-delete-orphan"/>
		<one-to-one name="EmploymentDetails" class="ProspectEmploymentDetails" constrained="false" cascade="all-delete-orphan"/>
		<bag name="Groups" inverse="true" cascade="all-delete-orphan" lazy="false">
			<key column="ProspectPK"/>
			<one-to-many class="ProspectGroupSetting"/>
		</bag>
		<property name="Notes"/>
		<many-to-one insert="false" update="false" lazy="false" name="ChannelPartner">
			<column name="ChannelPartnerPK" sql-type="uniqueidentifier" not-null="true" />
		</many-to-one>
		<property name="DTTerminalCreate" column="DTTerminalCreate" not-null="true" update="false"/>
		<property name="DTTerminalLastModified" column="DTTerminalLastModified" not-null="false" insert ="false" />
	</class>

	<class name="ProspectGovernmentId" table="tProspectGovernmentIdDetails">
		<id name="Id" column="ProspectPK">
			<generator class="foreign">
				<param name="property">Prospect</param>
			</generator>
		</id>
		<many-to-one name="Prospect" class="Prospect" column="ProspectPK" insert="false" update="false"/>
		<many-to-one name="IdType" class="NexxoIdType" column="NexxoIdTypePK" />
		<property name="Identification"/>
		<property name="IssueDate" not-null="false"/>
		<property name="ExpirationDate" not-null="false"/>
		<property name="DTServerCreate" update="false"/>
		<property name="DTServerLastModified" not-null="false" insert="false"/>
		<property name="DTTerminalCreate" column="DTTerminalCreate" not-null="true" update="false"/>
		<property name="DTTerminalLastModified" column="DTTerminalLastModified" not-null="false" insert="false" />
	</class>

	<class name="ProspectEmploymentDetails" table="tProspectEmploymentDetails">
		<id name="Id" column="ProspectPK">
			<generator class="foreign">
				<param name="property">Prospect</param>
			</generator>
		</id>
		<many-to-one name="Prospect" class="Prospect" column="ProspectPK" insert="false" update="false"/>
		<property name="Occupation"/>
		<property name="OccupationDescription"/>
		<property name="Employer"/>
		<property name="EmployerPhone"/>
		<property name="DTServerCreate" update="false"/>
		<property name="DTServerLastModified" not-null="false" insert="false"/>
		<property name="DTTerminalCreate" column="DTTerminalCreate" not-null="true" update="false"/>
		<property name="DTTerminalLastModified" column="DTTerminalLastModified" not-null="false" insert="false" />
	</class>

	<class name="ProspectGroupSetting" table="tProspectGroupSettings">
		<id name="rowguid" column="ProspectGroupPK">
			<generator class="guid"/>
		</id>
		<many-to-one name="prospect" class="Prospect" column="ProspectPK" />
		<property name="channelPartnerGroupId" column="ChannelPartnerGroupId" />
		<property name="DTServerCreate" not-null="true" update="false"/>
		<property name="DTServerLastModified" not-null="false" insert="false"/>
		<many-to-one name="ChannelPartnerGroup" class="ChannelPartnerGroup" column="ChannelPartnerGroupPK" />
		<property name="DTTerminalCreate" column="DTTerminalCreate" not-null="true" update="false"/>
		<property name="DTTerminalLastModified" column="DTTerminalLastModified" not-null="false" insert="false" />
	</class>

</hibernate-mapping>