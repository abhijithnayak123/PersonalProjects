<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="MGI.Core.Partner"
                   namespace="MGI.Core.Partner.Data">
  <class name="CustomerSession" table="tCustomerSessions">
    <id name="rowguid" column="CustomerSessionPK">
      <generator class="guid"/>
    </id>
    <property name="Id" generated="insert" update="false" insert="false">
      <column name="CustomerSessionID" not-null="true" sql-type="bigint IDENTITY(1000000000,1)"/>
    </property>
    <many-to-one name="AgentSession" class="AgentSession" column="AgentSessionPK"/>
    <many-to-one name="Customer" class="Customer" column="CustomerPK"/>
    <!--<bag name="Transactions" cascade="all-delete-orphan" lazy="false">
      <key column="txnRowguid"/>
      <one-to-many class="MGI.Core.Partner.Data.Transactions.Transaction"/>
    </bag>-->
    <set name="ShoppingCarts" table="tCustomerSessionShoppingCarts" cascade="all-delete-orphan" lazy="false">
      <key column="CustomerSessionPK"/>
      <many-to-many class="MGI.Core.Partner.Data.ShoppingCart" column="CartPK"></many-to-many>
    </set>
		<one-to-one name="CustomerSessionCounter" class="CustomerSessionCounter" cascade="all"></one-to-one>		
	  <property name ="CardPresent" not-null="false"/>
    <property name="DTStart" not-null="true" update="false"/>
    <property name="DTEnd" not-null="false" insert="false"/>
    <property name="DTServerCreate" not-null="true" update="false"/>
    <property name="DTServerLastModified" not-null="false" insert="false"/>
    <property name="TimezoneID" not-null="false" update="false"/>
		<property name="DTTerminalCreate" column="DTTerminalCreate" not-null="true" update="false"/>
		<property name="DTTerminalLastModified" column="DTTerminalLastModified" not-null="false" insert="false" />
  </class>

  <class name="IdentificationConfirmation" table="tIdentificationConfirmation">
    <id name="rowguid" column="IdConfirmPK">
      <generator class="guid"/>
    </id>
    <property name="Id" generated="insert" update="false" insert="false">
      <column name="IdConfirmID" not-null="true" sql-type="bigint IDENTITY(1000000000,1)"/>
    </property>
    <property name="AgentID"/>
    <property name="CustomerSessionID"/>
    <property name="DateIdentified"/>
    <property name="ConfirmStatus"/>
    <property name="DTServerCreate" not-null="true" update="false"/>
    <property name="DTServerLastModified" not-null="false" insert="false"/>
  </class>
</hibernate-mapping>