<?xml version="1.0" encoding="utf-8" ?>

<objects xmlns="http://www.springframework.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xmlns:db="http://www.springframework.net/database"
		 xmlns:tx="http://www.springframework.net/tx"
		 xsi:schemaLocation="http://www.springframework.net http://www.springframework.net/xsd/spring-objects.xsd">

	<import resource="assembly://MGI.Cxn.Customer.TCIS/MGI.Cxn.Customer.TCIS/Cxn.Customer.TCIS.Services.Spring.xml"/>
	<import resource="assembly://MGI.Core.CXE/MGI.Core.CXE/CXESpring.xml"/>
	<import resource="assembly://MGI.Cxn.Partner.TCF/MGI.Cxn.Partner.TCF/MGI.Cxn.Partner.TCF.Spring.xml"/>
	<import resource="assembly://MGI.Core.Partner/MGI.Core.Partner/Core.Partner.Services.Spring.xml"/>


	<object id ="TCFClientCustomerService" type="MGI.Biz.TCF.Impl.Customer, MGI.Biz.TCF">
		<property name ="CxnClientCustomerService" ref="TCISGateway"/>
		<property name="PTNRIdTypeService" ref="CoreNexxoDataStructuresService"/>
	</object>

	<object id="TCISAccountRepo" type="MGI.Common.DataAccess.Impl.NHibRepository&lt;MGI.Cxn.Customer.TCIS.Data.Account&gt;, MGI.Common.DataAccess">
		<property name="SessionFactory" ref="Cxn.Customer.TCIS.SessionFactory"></property>
	</object>
	
	<object id="TCFEventListenerDictionary" type="System.Collections.Generic.Dictionary&lt;string, MGI.Biz.Events.Contract.INexxoBizEventListener&gt;, mscorlib">
		<constructor-arg>
			<dictionary key-type="string" value-type="MGI.Biz.Events.Contract.INexxoBizEventListener">
				<entry key="Customer-Registration">
					<ref object="TCFCustomerRegistrationEventListener"/>
				</entry>
				<entry key="PreFlush-ShoppingCart">
					<ref object="TCFPreFlushEventListener"/>
				</entry>
				<entry key="Customer-Edit">
					<ref object="TCFCustomerEditEventListener"/>
				</entry>
				<entry key="PostFlush-ShoppingCart">
					<ref object="TCFPostFlushEventListener"/>
				</entry>
				<entry key="Customer-SyncIn">
					<ref object="TCFCustomerSyncInEventListener"/>
				</entry>

			</dictionary>
		</constructor-arg>
	</object>


	<object id="TCFCustomerRegistrationEventListener" type="MGI.Biz.TCF.Impl.CustomerRegistrationEventListener, MGI.Biz.TCF">
		<property name ="CxnClientCustomerService" ref="TCISGateway"/>
		<property name="CXECustomerService" ref="CXECustomerService"/>
		<property name="PartnerCustomerService" ref="Core.Partner.CustomerService"/>
		<property name="PTNRDataStructureService" ref="CoreNexxoDataStructuresService"/>
	</object>

	<object id="TCFPreFlushEventListener" type="MGI.Biz.TCF.Impl.PreFlushEventListener, MGI.Biz.TCF">
		<property name="GatewayService" ref="CXNPartnerTCF"/>
		<property name="PTNRDataStructureService" ref="CoreNexxoDataStructuresService"/>
		<property name ="CxnClientCustomerService" ref="TCISGateway"/>
	</object>
	<object id="TCFPostFlushEventListener" type="MGI.Biz.TCF.Impl.PostFlushEventListener, MGI.Biz.TCF">
		<property name="GatewayService" ref="CXNPartnerTCF"/>
		<property name="PTNRDataStructureService" ref="CoreNexxoDataStructuresService"/>
		<property name ="CxnClientCustomerService" ref="TCISGateway"/>
	</object>
	<object id="TCFCustomerSyncInEventListener" type="MGI.Biz.TCF.Impl.CustomerSyncInEventListener, MGI.Biz.TCF">
		<property name ="CxnClientCustomerService" ref="TCISGateway"/>
		<property name="CXECustomerService" ref="CXECustomerService"/>
		<property name="PartnerCustomerService" ref="Core.Partner.CustomerService"/>
		<property name="TCISAccountRepo" ref ="TCISAccountRepo"/>
		<property name="PTNRIdTypeService" ref="CoreNexxoDataStructuresService"/>
	</object>

	<object id="TCFCustomerEditEventListener" type="MGI.Biz.TCF.Impl.CustomerEditEventListener, MGI.Biz.TCF">
		<property name ="CxnClientCustomerService" ref="TCISGateway"/>
		<property name="CXECustomerService" ref="CXECustomerService"/>
		
		<property name="PartnerCustomerService" ref="Core.Partner.CustomerService"/>
		<property name="PTNRDataStructureService" ref="CoreNexxoDataStructuresService"/>
	</object>

	<object id="TCFBaseClass" type="MGI.Biz.TCF.Impl.BaseClass, MGI.Biz.TCF">
		<property name="PTNRDataStructureService" ref="CoreNexxoDataStructuresService"/>
	</object>
</objects>