<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		 xmlns:db="http://www.springframework.net/database"
		 xmlns:tx="http://www.springframework.net/tx"
		 xsi:schemaLocation="http://www.springframework.net http://www.springframework.net/xsd/spring-objects.xsd">

  <import resource="assembly://MGI.Core.Partner/MGI.Core.Partner/Core.Partner.Services.Spring.xml"/>
  <import resource="assembly://MGI.Core.CXE/MGI.Core.CXE/CXESpring.xml"/>
  <import resource="assembly://MGI.Cxn.Fund.FirstView/MGI.Cxn.Fund.FirstView/Cxn.Fund.FirstView.Services.Spring.xml"/>
  <import resource="assembly://MGI.Biz.Compliance/MGI.Biz.Compliance/Biz.Compliance.Services.Spring.xml"/>
  <import resource="assembly://MGI.Cxn.Customer.FIS/MGI.Cxn.Customer.FIS.Impl/Cxn.Customer.FIS.Services.Spring.xml"/>
  <import resource="assembly://MGI.Biz.Synovus/MGI.Biz.Synovus/Biz.Synovus.Spring.xml"/>
  <import resource="assembly://MGI.Biz.Carver/MGI.Biz.Carver/Biz.Carver.Spring.xml"/>
  <import resource="assembly://MGI.Biz.TCF/MGI.Biz.TCF/Biz.TCF.Spring.xml"/>
  
  <!--<object id="BizProspectFieldValidator" type="MGI.Biz.Customer.Impl.ProspectFieldValidator, MGI.Biz.Customer.Impl">
  </object>-->

  <object id="CustomerServiceCoreWrapper" type="MGI.Biz.Customer.Impl.CustomerServiceCoreWrapper, MGI.Biz.Customer">
    <property name="AgentSessionService" ref="AgentSessionService"/>
    <property name="CustomerSessionService" ref="CustomerSessionService"/>
    <property name="CXEAccountService" ref="AccountService"/>
    <property name="CXECustomerService" ref="CXECustomerService"/>
    <property name="PTNRIdTypeService" ref="CoreNexxoDataStructuresService"/>
    <property name="PartnerCustomerService" ref="Core.Partner.CustomerService"/>
    <!--<property name="FundProcessor" ref="FirstViewGateway" />-->
    <property name="ChannelPartnerService" ref="CorePartnerChannelPartnerService" />
		<property name="LimitService" ref="BIZLimitService" />
    <!--<property name="CustomerProcessor" ref="FISGateway"/>-->
    <property name="LocationSvc" ref="CorePartnerLocationService"/>
    <!--<property name ="ClientCustomerSvc" ref="ClientCustomerService"/>-->
    <property name="EventPublisher" ref="EventPublisher"/>
    <property name="ProcessorSvc" ref="GPRProcessorRouter"/>
    <property name="CustomerProcessorSvc" ref="CustomerProcessorRouter" />
    <property name="ChannelPartnerGroupService" ref="PartnerGroupService" />
	<property name="MessageCenterService" ref="CoreMessageCenterService"></property>
    <property name="ManageUserSvc" ref="CorePartnerUserService"></property>
	<property name="MongoDBLogger" ref="TLoggerRef"></property>
  </object>

  <object id="CustomerServiceValidatingWrapper" type="MGI.Biz.Customer.Impl.CustomerServiceValidatingWrapper, MGI.Biz.Customer">
    <!--<property name="ProspectFieldValidator" ref="BizProspectFieldValidator"/>-->
    <!--<property name="CXEIdTypeService" ref="CXEIdTypeService"/>-->
    <property name="InnerService" ref="CustomerServiceCoreWrapper"/>
	<property name="PartnerCustomerService" ref="Core.Partner.CustomerService"/>
	<property name="CXECustomerService" ref="CXECustomerService"/>
	<property name="ShoppingCartSvc" ref="ShoppingCartService"/>	
	<property name="AgentSessionService" ref="AgentSessionService"/>
  </object>

  <object id="ThrowsBizCustomerExceptionAdvice" type="MGI.Biz.Customer.Impl.Advice.ThrowsBizCustomerExceptionAdvice, MGI.Biz.Customer"/>

  <!--
  <object id="BIZCustomerEngine" type="MGI.Biz.Customer.Impl.CustomerServiceImpl, MGI.Biz.Customer.Impl">
    
  </object>
-->
  <object name="InterceptedBizCustomerEngine" type="MGI.Biz.Customer.Impl.CustomerServiceImpl, MGI.Biz.Customer">
    <property name="InnerService" ref="CustomerServiceValidatingWrapper"/>
    <property name="NLogger" ref="NLoggerRef"></property>
  </object>

  <object id="BIZCustomerEngine" type="Spring.Aop.Framework.ProxyFactoryObject, Spring.Aop">
    <property name="Target" ref="InterceptedBizCustomerEngine"/>
    <property name="InterceptorNames">
      <list>
        <value>ThrowsBizCustomerExceptionAdvice</value>
      </list>
    </property>
  </object>

  <!-- The GPR Processors -->
  <object id="CustomerProcessorRouter" type="MGI.Cxn.Common.Processor.Util.ProcessorRouter, MGI.Cxn.Common">
    <property name="Processors">
      <object id="CustomerProcessorsDictionary" type="System.Collections.Generic.Dictionary&lt;string, MGI.Cxn.Common.Processor.Contract.IProcessor&gt;, mscorlib">
        <constructor-arg>
          <dictionary key-type="string" value-type="MGI.Cxn.Common.Processor.Contract.IProcessor">          
            <entry key="Synovus">
              <ref object="ClientCustomerService"/>            
            </entry>
            <entry key="Carver">
              <ref object="CarverClientCustomerService"/>
            </entry>
		        <entry key="TCF">
              <ref object="TCFClientCustomerService"/>
            </entry>
          </dictionary>
        </constructor-arg>
      </object>
    </property>
  </object>
  <!-- EO GPR Processors -->

  <!-- The GPR Processors -->
  <object id="GPRProcessorRouter" type="MGI.Cxn.Common.Processor.Util.ProcessorRouter, MGI.Cxn.Common">
    <property name="Processors">
      <object id="GPRProcessorsDictionary" type="System.Collections.Generic.Dictionary&lt;string, MGI.Cxn.Common.Processor.Contract.IProcessor&gt;, mscorlib">
        <constructor-arg>
          <dictionary key-type="string" value-type="MGI.Cxn.Common.Processor.Contract.IProcessor">
            <entry key="Centris">
              <ref object="FirstViewGateway"/>
              <!-- imported from F.View impl xml-->
            </entry>
            <entry key="Synovus">
              <ref object="CxnFundsTSysService"/>
              <!--<ref object="FirstViewGateway"/>-->
              <!-- imported from TSys impl xml -->
            </entry>
			<entry key="TCF">
				  <ref object="CxnFundsTSysService"/>
			</entry>
          </dictionary>
        </constructor-arg>
      </object>
    </property>
	  <!-- The Fund Providers -->
	  <property name="Providers">
		  <object id="FundProvidersDictionary" type="System.Collections.Generic.Dictionary&lt;string, string&gt;, mscorlib">
			  <constructor-arg>
				  <dictionary key-type="string" value-type="string">
					  <entry key="Synovus">
						  <value type="string">TSys</value>
					  </entry>					  
					  <entry key="TCF">
						  <value type="string">Visa</value>
					  </entry>					  
					  <entry key="Centris">
						  <value type="string">FirstView</value>
					  </entry>
				  </dictionary>
			  </constructor-arg>
		  </object>
	  </property>
	  <!-- EO Fund Providers -->
  </object>
  <!-- EO GPR Processors -->

  <!--Generic event handlers-->
  <object id="EventPublisher" type="MGI.Biz.Events.Impl.DefaultNexxoBizEventPublisher, MGI.Biz.Events">
    <property name="NexxoBizEventListeners" ref="EventListenerDictionary"/>
  </object>
  <!-- end of belongs to generic event handlers -->

  <!-- belongs to the Synovus Impl configuration file. Move there - TODO ... -->
  <object id="EventListenerDictionary"
            type="System.Collections.Generic.Dictionary&lt;string, System.Collections.Generic.Dictionary&lt;string, MGI.Biz.Events.Contract.INexxoBizEventListener&gt;&gt;, mscorlib">
    <constructor-arg>
      <dictionary key-type="string" value-type="System.Collections.Generic.Dictionary&lt;string, MGI.Biz.Events.Contract.INexxoBizEventListener&gt;">
        <entry key="Synovus">
          <ref object="SynovusEventListenerDictionary"/>
        </entry>
        <entry key="Carver">
          <ref object="CarverEventListenerDictionary"/>
        </entry>
        <entry key="TCF">
          <ref object="TCFEventListenerDictionary"/>
        </entry>
      </dictionary>
    </constructor-arg>
  </object>

	
  <!---->
</objects>
