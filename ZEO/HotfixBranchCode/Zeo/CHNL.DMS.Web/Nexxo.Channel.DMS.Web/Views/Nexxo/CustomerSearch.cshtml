@model MGI.Channel.DMS.Web.Models.CustomerSearch
@{
	ViewBag.Title = MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.CustomerSearch;
	Layout = "~/Views/Shared/_Menu.cshtml";

}
<script type="text/javascript">
	var DisplayURLForChooseLocation = '@Url.Action("DisplayChooseLocation", "TerminalSetup")';
	var IsChooseLocation = '@TempData["IsChooseLocation"]';
</script>
<link href="@Url.Content("~/Content/css/Common/jquery-ui.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/jquery-grid/ui.jqgrid.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/jquery-ui/redmond/jquery-ui-1.8.14.custom.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/jquery-ui/redmond/jquery-ui-1.9.2.custom.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/Common/lib/jquery-grid/grid.locale-en.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Common/lib/jquery-grid/jquery.jqGrid.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/Common/lib/jquery.maskedinput-1.3.js")" type="text/javascript"></script>
@*<script src="@Url.Content("~/Scripts/Fund/Gprs.js")" type="text/javascript"></script>*@
<script src="@System.Web.Configuration.WebConfigurationManager.AppSettings["VoltagePieBaseUrl"]/pie/v1/encryption.js" language="JavaScript" type="text/javascript" id="pie_script"></script>
<script src="@System.Web.Configuration.WebConfigurationManager.AppSettings["VoltagePieBaseUrl"]/pie/v1/mgi/getkey.js" language="JavaScript" type="text/javascript"></script>

<script type="text/javascript">
	var validateCustomer = '@Url.Action("ValidateCustomerStatusAndId","CustomerSearch")';
	var showPopup = '@Model.showIdConfirmedPopUp';
	var CustomerSearchCriteriaFlag = '@Session["criteriaTag"]';
	var swipeCardErrorMessage = '@ViewBag.SwipeCardErrorMessage';
	if (swipeCardErrorMessage != '') {
		showExceptionPopupMsg(swipeCardErrorMessage);
	}
</script>
<script src="@Url.Content("~/Scripts/Customer/customerSearch.js")" type="text/javascript"></script>

@{
	string disableClass = string.Empty;
	bool isAdminRole = (Convert.ToInt32(HttpContext.Current.Session["UserRoleId"]) == (int)UserRoles.SystemAdmin);
	bool isTerminalSetup = false;
	if (Session["IsTerminalSetup"] != null)
	{
		isTerminalSetup = Session["IsTerminalSetup"].ToString() == "1" ? true : false;
	}

	if (!isTerminalSetup && !isAdminRole) {
		disableClass = "disable_txt";
		<div class="field-validation-error page_head product_head"> Terminal not set up, Please contact administrator </div>
	}
}
@Html.Partial("_partialSpinner")
<div class='@disableClass'>
	<div>
		<ul class="page_head product_head search_head_fix">
			<li>Find Customer</li>
		</ul>
	</div>
	<div class="cust_head_wrap">
		<ul class="page_head product_head cust_head">
			<li class="iePadding">Use one of the following search methods to look up customer profile</li>
		</ul>
	</div>
	<div class="txt_center cust_summary_valid" id="valid">
		@Html.ValidationSummary(true)
	</div>
	<div id="NoRecords" class="txt_center cust_summary_error">
		<div>
			@if(ViewBag.ErrorMessage != null) {
				@ViewBag.ErrorMessage
			}
		</div>
	</div>
	<div class="cust_search_wrap">
		<div class="cust_search_options">
			@Html.Partial("_CustomerCardSearch", Model)

		</div>
		<div class="cust_crit_search">
			<div class="cust_search_options">
				@Html.Partial("_CustomerCriteriaSearch", Model)
			</div>
		</div>

	</div>

	<div> </div>
	<div class="search_trans_grid_wrap" id="griddiv">
		<div class="txt_center"> <span class="shp_cart">Customer Search </span> </div>
		<div class="trans_grid_tab" id="divJqTable">
			<table id="jqTable" class="scroll">
			</table>
			<div id="jqTablePager" />
		</div>
	</div>
	<div> &nbsp;</div>

