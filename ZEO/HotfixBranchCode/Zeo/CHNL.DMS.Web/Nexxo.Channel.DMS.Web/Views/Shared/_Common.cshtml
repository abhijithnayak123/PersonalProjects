@model MGI.Channel.DMS.Web.Models.BaseModel
@{

	Layout = null;
	System.Collections.Hashtable HtLocaluse = (System.Collections.Hashtable)Session["HTSessions"];
	string peripheralServiceUrl = string.Empty;
	MGI.Channel.DMS.Server.Data.AgentSession agentSession;

	if (HtLocaluse != null)
	{
		agentSession = ((MGI.Channel.DMS.Server.Data.AgentSession)(HtLocaluse["TempSessionAgent"]));
		if (agentSession.Terminal != null && agentSession.Terminal.PeripheralServer != null)
		{
			if (!string.IsNullOrWhiteSpace(agentSession.Terminal.PeripheralServer.PeripheralServiceUrl))
			{
				peripheralServiceUrl = agentSession.Terminal.PeripheralServer.PeripheralServiceUrl;
			}
		}
	}
	bool isAnonymousCustomer = Model.customerSession.Customer.IsAnonymous;
}
<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width" />
	<title>Home</title>
	<script language="javascript" type="text/javascript">
	var sessionTimeoutWarning = @System.Configuration.ConfigurationSettings.AppSettings["SessionWarning"].ToString();
	var sessionTimeout = @Session.Timeout;
	var hasTransaction = false;

	var rotate = null;
	var rotateSession = null;
	var refreshMsgCenter = null;
	var showCartAbandonmentConfirm = true;
	function redirectAfterTimeout() {
		clearTimeout(rotate);
		var redirectTimeout = @(HttpContext.Current.Session.Timeout * 60 * 1000);
		rotate = setTimeout(function(){UpdateCounterId();redirectToLogin()}, redirectTimeout);
		redirectSessionWarning();
	}

	function showSessionWarningPopup() {
		var SessionWarningURL='@Url.Action("ShowSessionWarningPopup", "CancelTransaction")';
		_sessionWarnPopup(SessionWarningURL);
	}
	var RemoveCheckPopupURL ='@Url.Action("RemoveCheckPopUp","CertegyProcessCheck")'
	var RemoveURL ='@Url.Action("CertegyProcessCheck", "ProcessCheck")';
	var ParkURL = '@Url.Action("ParkShoppingCartItemAlert", "ShoppingCart")';
	var DeleteCartItemAlertURL = '@Url.Action("DeleteCartItemAlert", "ShoppingCart")';
	var DeleteURL = '@Url.Action("DeleteCartItem", "CancelTransaction")';
	var cancelURL = '@Url.Action("CancelTransaction", "CancelTransaction")';
	var doneURL = '@Url.Action("TransactionDone", "ShoppingCart")';
	var profileURL = '@Url.Action("CustomerProfile", "CustomerSearch")';
	var cartDetailsURL = '@Url.Action("DisplayDetails", "TransactionSummary")';
	var billPayment = '@Url.Action("SelectPayee", "BillPayment")';
	var cancelPopURL = '@Url.Action("CancelPopTransaction", "CancelTransaction")';
	var cancelReceiverURL = '@Url.Action("CancelToSaveReceiverPopup", "CancelTransaction")';
	var sendMoneyDisplayAddReceiverURL='@Url.Action("DisplayAddReceiver", "SendMoney")';
	var createReceiverURL='@Url.Action("Receivers", "SendMoney")';
	var getReceiverForEditURL='@Url.Action("GetReceiverForEdit", "SendMoney")';
	var selectReceiverURL='@Url.Action("SelectReceiver", "SendMoney")';
	var getDoddFrankConfirmationURL='@Url.Action("GetPopup", "DoddFrankConfirmation")'
	var WUStates_URL = '@Url.Action("WUStates", "SendMoney")';
	var WUCities_URL = '@Url.Action("WUCities", "SendMoney")';
	var CustomerLookUP_Url = '@Url.Action("CustomerLookUp", "CustomerLookUp")';
	var CancelAcceptFeeSubmitURL = '@Url.Action("AcceptFee", "ApprovedCheckTransaction")';
	var CancelAcceptFeeURL = '@Url.Action("CancelToAcceptFee", "CancelTransaction")';
	var TransHistoryPrintURL = '@Url.Action("GetPopup", "TransactionHistory")';
	var SearchReciverGrid = '@Url.Action("SearchReceiverGrid", "SendMoney")';
	var SaveReceiverConfirmationURL = '@Url.Action("SaveReceiverConfirmation", "SendMoney")';
	var CancelCheckConfirmationURL = '@Url.Action("ProductInformation", "Product")';
	var ExceptionMsgPopupURL = '@Url.Action("DisplaySystemMessage", "CancelTransaction")';
	var CustomerSearchURL = '@Url.Action("CustomerSearch", "CustomerSearch")';
	var MoneyOrderPrintConfirmPopupURL = '@Url.Action("MoneyOrderPrintConfirm", "ShoppingCart")';
	//This is added for User Story # US1956. - Start
	var ExceptionMsgPopupURLForActOnMyBehalf = '@Url.Action("DisplaySystemMessageForActOnMyBehalf", "CancelTransaction")';
	var SkipGoldCardEnrollment_URL =  '@Url.Action("SkipGoldCard", "EnrollWesternUnion")';
	var SendMoney_URL =  '@Url.Action("SendMoney", "Product")';
	var swipeURL = '@Url.Action("ShowSwipeMessage", "CustomerSearch")'
	//This is added for User Story # US1956 and Merging into seperate .JS File. - Start

	var CurrencyCodeURL = '@Url.Action("WUCountryCurrencyCode", "SendMoney")';
	var DeliveryMethods_URL = '@Url.Action("WUDeliveryMethods", "SendMoney")';
	var SendMoneyAutoComplete = '@Url.Action("AutoCompleteReceiver", "SendMoney")';
	var SendMoneyReceiverByFullName = '@Url.Action("ReceiverByFullName", "SendMoney")';
	var populateReceiverDetailsURL = '@Url.Action("PopulateReceiverDetails", "SendMoney")';
	var GetRecForEdit = '@Url.Action("GetReceiverForEdit", "SendMoney")?ReceiverId=';

	//This is added for User Story # US1956 and Merging into seperate .JS File.  - Complete.

	var NPSbaseURL = '@peripheralServiceUrl';
	var ShoppingCartRefreshURL='@Url.Action("GetShoppingCartSummary", "ShoppingCart")';
	var TransactionPopupURL = '@Url.Action("DisplayTransactionDetails", "TransactionHistory")';
	var TransactionHistoryReceiptDataURL = '@Url.Action("GetReceiptData", "TransactionHistory")';
	var PersonalInfoNavigationURL = '@Url.Action("PersonalInformation", "CustomerRegistration")';
	var DoddfrankDisclosureReceiptDataURL = '@Url.Action("GetDoddfrankReceiptData", "TransactionHistory")';
	var WUTermsConditionsPopupURL = '@Url.Action("ShowTermsConditonDialog", "SendMoney")';
	var DeliveryMethods_URL = '@Url.Action("WUDeliveryMethods", "SendMoney")';
	var DeliveryOptions_URL='@Url.Action("WUDeliveryOptions", "SendMoney")';
	var replaceMoneyOrderURL= '@Url.Action("ReplaceMoneyOrder", "ShoppingCart")';
	var MoneyOrderScanPopupURL = '@Url.Action("ScanAMoneyOrder", "ShoppingCart")';
	var MoneyOrderScanConfirmPopupURL = '@Url.Action("ScanMoneyOrder", "ShoppingCart")';
	var MoneyOrderPrintPopupURL='@Url.Action("PrepareMoneyOrderCheck", "ShoppingCart")';
	var WUCustomerProfileAccount_URL = '@Url.Action("UpdateWUCustomerAccount", "EnrollWesternUnion")';
	var WUCustomerGoldCardSearch_URL = '@Url.Action("CustomerWUGoldCardNumbersGrid", "EnrollWesternUnion")';
	var CancelMTURL = '@Url.Action("CancelMTTransaction", "CancelTransaction")';
	var CancelBillPayReviewTransaction ='@Url.Action("CancelBillPayReviewTransaction","CancelTransaction")';
	var defaultErrorMessage = "MGiAlloy | 0.0 | Unknown error occured while getting data. | Please contact System Administrator";
	var RetryPrintMsgPopupURL = '@Url.Action("DisplayRetryPrintMessage", "CancelTransaction")';
	var windowCloseAlertMessage = '@MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.WindowCloseAlertMessage';
	var CustomerSearchURL = '@Url.Action("CustomerSearch", "CustomerSearch")';
	var ImageBaseUrl = '@Url.Content("~/Content/images/")';
	var ROOT = '@Url.Content("~/")';
	var checkFrankingUpdateURL = '@Url.Action("UpdateCheckTransactionFranked", "ShoppingCart")';
	var shoppingcartStatusCheckURL = '@Url.Action("CheckShoppingCartStatus", "CustomerSearch")';
	var shoppingCartStatusPopupURL = '@Url.Action("GetShoppingCartStatusPopUp", "CustomerSearch")';
	var shoppingCartItemsUrl = '@Url.Action("ParkAndDeleteShoppingCartItems", "ShoppingCart")';
	var LoginUrl = '@Url.Action("Create", "Login", new { channelPartner = @Model.ChannelPartnerName })';
	var CancelBillPayUrl = '@Url.Action("CancelBillPayDetails", "WesternUnionBillPay")';
	var UpdateCounterIdUrl = '@Url.Action("UpdateCounterId", "CustomerSearch", new { CounterIdAssigned = true })';
	var LogoutUrl = '@Url.Action("Logout", "SSO")';
	var CashierValidateUrl = '@Url.Action("CashierValidatePopup", "Product")';
	var Product_URL ='@Url.Action("CashierLocationState", "Product")';
	var SWBAgreeURL ='';
	var SendMoneyConfirm_URL ='@Url.Action("SendMoneyConfirm", "SendMoney")';
	var checkDeclinedReceiptDataURL = '@Url.Action("GetCheckDeclinedReceiptData", "TransactionHistory")';
	var PostFlushURL = '@Url.Action("PostFlushShoppingCart", "ShoppingCart")';
	var CustomerStatusCheck = '@Url.Action("WarringPopUpToCloseCustomerStatus", "CancelTransaction")';
	var SSNValidationUrl = '@Url.Action("IsSSNExists", "Product", new { channelPartner = @Model.ChannelPartnerName })';
	var ShoppingCartEmptyWhenClosedURL = '@Url.Action("GetShoppingCartEmptyWhenClosedPopUp", "CustomerRegistration")';
	var CertegyConfirmationPopup_URL = '@Url.Action("ShowCertegyConfirmationPopup", "ShoppingCart")';
	////Begin TA-191 Changes
	//       User Story Number: TA-191 | Server |   Developed by: Sunil Shetty     Date: 21.04.2015
	//       Purpose: The user / teller will have the ability to delete a specific biller from the Favorite Billers list.
	var DelFavBillerMsgPopup_URL = '@Url.Action("DisplayDeleteFavBiller", "WesternUnionBillPayment")';
	var DeleteFavoriteBiller_URL = '@Url.Action("DeleteFavoriteBiller", "WesternUnionBillPayment")';
	var FeeChangeOnCheckTypeChange_URL ='@Url.Action("FeeConformationAfterChangingCheckType", "CheckCancel")';
	////End TA-191 Changes

	////AL-324 Visa Prepaid Phase
	var ClosePrepaidAccount_Url = '@Url.Action("ClosePrepaidAccount", "VISAProductCredential")';
	var CardMaintenancePopUp_Url = '@Url.Action("CardMaintenancePopUp", "VISAProductCredential")';
	var CloseAccountSubmit_Url = '@Url.Action("ClosePrepaidAccount", "VISAProductCredential")';
	var CardMaintenanceSubmit_Url = '@Url.Action("CardMaintenance", "VISAProductCredential")';
	var shippingType_url = '@Url.Action("ShippingFee", "VISAProductCredential")';
	var VisaFee_url = '@Url.Action("FundFee", "VISAProductCredential")';
	var OrderCompanionCard_url = '@Url.Action("OrderComapanionCard", "VISAProductCredential")';
	////End AL-324

    ///Begin AL-3502 delete Receivers from favorites list
    var DelFavReceiverMsgPopup_URL = '@Url.Action("DisplayDeleteFavReceiver", "SendMoney")';
    var DeleteFavoriteReceiver_URL = '@Url.Action("DeleteFavoriteReceiver","SendMoney")'
	</script>
	<link href="@Url.Content("~/Content/css/Common/jquery-ui.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/jquery-grid/ui.jqgrid.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/jquery-ui/redmond/jquery-ui-1.8.14.custom.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/jquery-ui/redmond/jquery-ui-1.9.2.custom.css")" rel="stylesheet" type="text/css" />
	<!--[if IE 7]>
		<link href="@Url.Content("~/Content/css/Synovus/ie7.css")" rel="stylesheet" type="text/css" />
	<![endif]-->
	<!--[if IE 8]>
		<link href="@Url.Content("~/Content/css/Synovus/ie8.css")" rel="stylesheet" type="text/css" />
	<![endif]-->
	<link href="@Url.Content("~/Content/css/Common/base-state-rule.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/css/Common/layout-rule.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content("~/Content/css/Common/module-rule.css")" rel="stylesheet" type="text/css" />
	<link href="@Url.Content(string.Format("~/Content/css/{0}/Nexxo.css", Model.ChannelPartnerName))" rel="stylesheet" type="text/css" />
	<script src="@Url.Content("~/Scripts/Common/lib/jquery-1.7.1.min.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/jquery.validate.min.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/spin.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/NexxoCustomValidations.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/jquery-ui.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/Cashing.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/AgentMenu.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/BrowserCustomisation.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Customer/CustomerProfilePopUp.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/TransactionHistory/TransactionHistoryPopup.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/json2.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/Common.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/helper.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/WindowCloseAlert.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/jquery.placeholder.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/lib/jquery.maskedinput-1.3.js")" type="text/javascript"></script>
	<script src="@Url.Content("~/Scripts/Common/PopupScript.js")" type="text/javascript"></script>
	<!--[if IE 7]>
	<link href="@Url.Content("~/Content/css/Synovus/ie7.css")" rel="stylesheet" type="text/css" />
	<![endif]-->
	<!--[if IE 8]>
	<link href="@Url.Content("~/Content/css/Synovus/ie8.css")" rel="stylesheet" type="text/css" />
	<![endif]-->
	<!--[if IE 8]>
	<link href="@Url.Content("~/Content/css/Synovus/ie8.css")" rel="stylesheet" type="text/css" />
	<![endif]-->

	<script type="text/javascript">
		$(window).load(function () {
			if (($("#PanelStatus").length > 0)) {
				for (var i = 0; i < $('.DisablePanels').find('img').length; i++) {
					$('.DisablePanels').find('img')[i].id = "";
				}
			}
		});
		$(document).ready(function () {
			$(document).on("click", "a", function (e) {
				if (e.target.pathname == "/CashaCheck/ScanACheck") {
					var submitbutton = $(this).find('input[type="submit"]');
					var button = $(this).find('input[type="button"]');
					setTimeout(function () {
						button.addClass('DisableButtons');
						submitbutton.addClass('DisableButtons');
						$('.anc_link_btn').addClass('DisableButtons');
						$(".nav_item").each(function () {
							$(this).addClass("DisablePanels");
						});
						$(".nav_name").each(function () {
							$(this).attr('disabled', 'disabled');
						});
					});
				}
			});
			var msg = '@ViewBag.ExceptionMsg';
			var showExceptionPopup = '@ViewBag.IsException';
			if (showExceptionPopup == 'True')
				showExceptionPopupMsg(msg);
		});

	</script>
</head>
<body onload="Javascript:redirectAfterTimeout();">
	<div id="layout_container_wrap">
		@{
			bool isTellerRole = (Convert.ToInt32(HttpContext.Current.Session["UserRoleId"]) == (int)UserRoles.Teller);
		}
		<div id="layout_primary_head">
			<div class="logo_bg">
				@if (Session["ChannelPartnerName"] != null)
				{
					string logoUrl = Url.Content(string.Format("~/Content/images/{0}.png", @Model.ChannelPartnerName));
					<img class="logo_agent" alt=" " src=@logoUrl />
					if (Model.channelPartner.IsMGIAlloyLogoEnable)
					{
						<img class="logo_nexxo" alt=" " src="~/Content/images/MGiAlloylogo.png" />
					}
				}
			</div>
			<div class="page_head">
				@{
					string customer = ViewBag.Title;
				}
				@if (Model.customerSession != null)
				{
					customer = Model.customerSession.Customer.PersonalInformation.FName + " " + Model.customerSession.Customer.PersonalInformation.LName;
				}
				<div class="bread_head">
					@*Html.ActionLink("Home", "CustomerSearch", "CustomerSearch", null, new { @class = "search_head" }) *@
					@*US1995*@
					<a onclick="checkShoppingCartStatus()" class="menu" href="#">Home</a>
				</div>
				<ul id="layout_sec_nav">
					@if (!Request.IsAuthenticated)
					{
						@Html.ActionLink("Log On", "Create", "Login", new { @class = "hide" })
					}
					@if (Convert.ToInt32(HttpContext.Current.Session["UserRoleId"]) == (int)UserRoles.SystemAdmin)
					{
						<li>
							<img src="@Url.Content("~/Content/Images/Sys-Admin-Icon.png")" alt="Agent" height="25px;" class="icon_agent" />
						</li>
					}
					@if (Convert.ToInt32(HttpContext.Current.Session["UserRoleId"]) == (int)UserRoles.Manager)
					{
						<li>
							<img src="@Url.Content("~/Content/Images/ManageUsersIconGreen.png")" alt="Agent" height="25px;" class="icon_agent" />
						</li>
					}
					@if (Convert.ToInt32(HttpContext.Current.Session["UserRoleId"]) == (int)UserRoles.ComplianceManager)
					{
						<li>
							<img src="@Url.Content("~/Content/Images/Agent.png")" alt="Agent" height="25px;" class="icon_agent" />
						</li>
					}
					@if (Convert.ToInt32(HttpContext.Current.Session["UserRoleId"]) == (int)UserRoles.Teller)
					{
						<li>
							<img src="@Url.Content("~/Content/Images/Agent.png")" alt="Agent" height="25px;" class="icon_agent" />
						</li>
					}
					@if (Convert.ToInt32(HttpContext.Current.Session["UserRoleId"]) == (int)UserRoles.Tech)
					{
						<li>
							<img src="@Url.Content("~/Content/Images/Tech-User-Icon.png")" alt="Technical" height="25px;" class="icon_agent" />
						</li>
					}
					<li id="dropdown" class="nav_txt">
						@Html.Label(@HttpContext.Current.Session["UserNameText"].ToString(), new { @class = "nav_breadcrumb tellerNameDisable" })
					</li>
					<li class="nav_txt nav_divider">|</li>
					<li>
						<a href="@Url.Content("~/Help.html")" class="nav_txt nav_txt_adj" onclick="window.open(this.href, 'Help','left=20,top=20,width=800,height=600,toolbar=1,resizable=0'); return false;">
							Help?
						</a>
					</li>
				</ul>
			</div>
			<div>
			</div>
			<div class="clear_both">
			</div>
		</div>
		<div id="layout_primary_content">
			<div class="main_content_wrap">
				<div id="layout_left_pane_shadow">
				</div>
				<div id="layout_left_pane">
					<div id="layout_primary_nav">
						@if (isAnonymousCustomer)
						{
							@Html.Partial("_partialAnonymousProductsMenu")
						}
						else
						{
							@Html.Partial("_partialProductMenu")
						}
					</div>
					<div class="tips">
						<hgroup>
							<h1 class="head">Tips / Offers </h1>
						</hgroup>
						<div class="msg_bg">
							<div class="tipsandoffers">
								<br />
								@Html.Action("TipsAndOffers", "Product")
								<div>
									&nbsp;
								</div>
							</div>
						</div>
					</div>
					<div class="tipsAndMesgCenterSpace">
						&nbsp;
					</div>
					<div class="tips">
						<hgroup>
							<h1 class="head"> Message Center </h1>
						</hgroup>
						<div class="msg_bg">
							<div class="msg_center">
								@Html.Partial("_partialMessageCenter")
							</div>
						</div>
					</div>
				</div>
				<div id="layout_center_pane">
					@RenderBody()
				</div>
				<div id="layout_right_pane">
					<div class="product_cart">
						<div>
							@Html.Partial("_ShoppingCart")
						</div>
					</div>
					<br />
					@Html.Action("CustomerProfile", "CustomerProfile")
				</div>
			</div>
		</div>
		<input type="hidden" id="CheckScanError" value="@MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.CheckScanError" />
		<input type="hidden" id="PrintError" value="@MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.PrintError" />
		<input type="hidden" id="ConnectivityError" value="@MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.ConnectivityError" />
		<input type="hidden" id="MoneyOrderScanError" value="@MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.MoneyOrderScanError" />
		<input type="hidden" id="MoneyOrderCheckPrintError" value="@MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.MoneyOrderCheckPrintError" />
		<input type="hidden" id="BadMicrError" value="@MGI.Channel.DMS.Web.App_GlobalResources.Nexxo.BadMICRError" />
		<input type="hidden" id="PageStatus" value="0" />
		<div class="label_txt version_nor">
			<span>Version: @System.Configuration.ConfigurationManager.AppSettings["VersionInfo"]</span>
		</div>
	</div>

</body>
</html>
<script type="text/javascript">

	$(document).on('submit', 'form', function () {

	});

	var shoppingcartRefreshTime = @System.Configuration.ConfigurationSettings.AppSettings["shoppingcartRefreshTime"].ToString();
	var ShoppingCartCheckoutRefreshURL='@Url.Action("GetShoppingCartPendingChecks", "ShoppingCart")';
	$(function () {
		setInterval(function () {reloadShoppingCart(); }, parseInt(shoppingcartRefreshTime) * 60 * 1000);
	});
	function reloadShoppingCart(requestData) {
		$.ajax({
			type: "POST",
			url: ShoppingCartRefreshURL,
			data: JSON.stringify(requestData),
			dataType: 'json',
			contentType: 'application/json; charset=utf-8',
			success: function (result) {
				$("#jqTableShoppingCart").trigger("reloadGrid");
			}
		});
	}
</script>
