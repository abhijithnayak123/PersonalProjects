<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
    <changeSet author="maxl (generated)" id="1426183678410-1">
        <createTable tableName="SchemaVersions">
            <column autoIncrement="true" name="Id" type="INT">
                <constraints primaryKey="true" primaryKeyName="PK_SchemaVersions_Id"/>
            </column>
            <column name="ScriptName" type="NVARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="Applied" type="datetime">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-2">
        <createTable tableName="tBridgerFailures">
            <column name="rowguid" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="Id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="CustomerId" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="ServerName" type="NVARCHAR(20)"/>
            <column name="ExitCode" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="DTAlertSent" type="datetime"/>
            <column name="Cleared" type="BIT"/>
            <column name="DTCleared" type="datetime"/>
            <column name="ClearedBy" type="NVARCHAR(20)"/>
            <column name="DTCreate" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="DTLastMod" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-3">
        <createTable tableName="tCompliancePrograms">
            <column name="rowguid" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="Id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="Name" type="NVARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="RunOFAC" type="BIT">
                <constraints nullable="false"/>
            </column>
            <column name="DTCreate" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="DTLastMod" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-4">
        <createTable tableName="tLimitConditions">
            <column name="rowguid" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="LimitPK" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column name="TypeId" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="Name" type="NVARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="Value" type="NVARCHAR(255)"/>
            <column name="AppliesToId" type="INT"/>
            <column name="DTCreate" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="DTLastMod" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-5">
        <createTable tableName="tLimitFailures">
            <column name="rowguid" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="Id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="CustomerSessionId" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="TransactionType" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="TransactionAmount" type="MONEY">
                <constraints nullable="false"/>
            </column>
            <column name="LimitAmount" type="MONEY">
                <constraints nullable="false"/>
            </column>
            <column name="ComplianceProgramName" type="NVARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="DTCreate" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="DTLastMod" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-6">
        <createTable tableName="tLimitTypes">
            <column name="rowguid" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="ComplianceProgramPK" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column name="ClassId" type="NVARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="TypeId" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="Name" type="NVARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="Value" type="NVARCHAR(50)"/>
            <column name="DTCreate" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="DTLastMod" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-7">
        <createTable tableName="tLimits">
            <column name="rowguid" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="LimitTypePK" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column name="Name" type="NVARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="PerX" type="MONEY"/>
            <column name="PerDay" type="MONEY"/>
            <column name="PerNDays" type="MONEY"/>
            <column name="NDays" type="INT"/>
            <column name="IsDefault" type="BIT">
                <constraints nullable="false"/>
            </column>
            <column name="CurrencyCode" type="NVARCHAR(3)"/>
            <column name="MultipleNDaysLimits" type="NVARCHAR(255)"/>
            <column name="DTCreate" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="DTLastMod" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-8">
        <createTable tableName="tTransactionMinimums">
            <column name="rowguid" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="ComplianceProgramPK" type="UNIQUEIDENTIFIER">
                <constraints nullable="false"/>
            </column>
            <column name="TransactionType" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="Minimum" type="MONEY">
                <constraints nullable="false"/>
            </column>
            <column name="DTCreate" type="datetime">
                <constraints nullable="false"/>
            </column>
            <column name="DTLastMod" type="datetime"/>
        </createTable>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-9">
        <addPrimaryKey columnNames="rowguid" constraintName="PK_tBridgerFailures" tableName="tBridgerFailures"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-10">
        <addPrimaryKey columnNames="rowguid" constraintName="PK_tCompliancePrograms" tableName="tCompliancePrograms"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-11">
        <addPrimaryKey columnNames="rowguid" constraintName="PK_tLimitConditions" tableName="tLimitConditions"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-12">
        <addPrimaryKey columnNames="rowguid" constraintName="PK_tLimitFailures" tableName="tLimitFailures"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-13">
        <addPrimaryKey columnNames="rowguid" constraintName="PK_tLimitTypes" tableName="tLimitTypes"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-14">
        <addPrimaryKey columnNames="rowguid" constraintName="PK_tLimits" tableName="tLimits"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-15">
        <addPrimaryKey columnNames="rowguid" constraintName="PK_tTransactionMinimums" tableName="tTransactionMinimums"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-16">
        <addForeignKeyConstraint baseColumnNames="ComplianceProgramPK" baseTableName="tLimitTypes" constraintName="FK_tLimitTypes_tCompliancePrograms" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="rowguid" referencedTableName="tCompliancePrograms"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-17">
        <addForeignKeyConstraint baseColumnNames="LimitTypePK" baseTableName="tLimits" constraintName="FK_tLimits_tLimitTypes" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="rowguid" referencedTableName="tLimitTypes"/>
    </changeSet>
    <changeSet author="maxl (generated)" id="1426183678410-18">
        <addForeignKeyConstraint baseColumnNames="ComplianceProgramPK" baseTableName="tTransactionMinimums" constraintName="FK_tTransactionMinimums_tCompliancePrograms" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="rowguid" referencedTableName="tCompliancePrograms"/>
    </changeSet>
</databaseChangeLog>
