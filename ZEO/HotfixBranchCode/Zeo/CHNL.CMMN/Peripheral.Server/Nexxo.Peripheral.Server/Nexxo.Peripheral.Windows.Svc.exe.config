<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.ContextHandler, Spring.Core" />
      <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" />
    </sectionGroup>
  </configSections>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
  <spring>
    <context>
      <resource uri="config://spring/objects" />
    </context>
    <objects xmlns="http://www.springframework.net">
      <description>An example that demonstrates use of a poincut.</description>
      <object id="aroundAdvisor" type="Spring.Aop.Support.NameMatchMethodPointcutAdvisor, Spring.Aop">
        <property name="MappedNames">
          <list>
            <value>*Execute</value>
          </list>
        </property>
      </object>
      <object id="TMS9000CheckScanner" type="Spring.Aop.Framework.ProxyFactoryObject">
        <property name="Target">
          <object type="MGI.Peripheral.CheckScanner.EpsonTMS9000.Impl.CheckScanner, MGI.Peripheral.CheckScanner.Epson.TMS9000.Impl" />
        </property>
      </object>
      <object id="TMS9000ReceiptPrinter" type="Spring.Aop.Framework.ProxyFactoryObject">
        <property name="Target">
          <object type="MGI.Peripheral.Printer.EpsonTMS9000.Impl.EpsonPrinter, MGI.Peripheral.ReceiptPrinter.Epson.TMS9000.Impl" />
        </property>
      </object>
      <object id="TMS9000CheckPrinter" type="Spring.Aop.Framework.ProxyFactoryObject">
        <property name="Target">
          <object type="MGI.Peripheral.CheckPrinter.Epson.TMS9000.Impl.EpsonCheckPrinter, MGI.Peripheral.CheckPrinter.Epson.TMS9000.Impl" />
        </property>
      </object>
    </objects>
  </spring>


  <system.serviceModel>
    <standardEndpoints />
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <bindings>
      <basicHttpBinding>
        <binding name ="soapBinding">
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </basicHttpBinding>
      <webHttpBinding>
        <!--<binding name="httpBinding">-->
        <binding name="Bind1" crossDomainScriptAccessEnabled="true" maxReceivedMessageSize="900000" maxBufferSize="900000" >
          <security mode="Transport">
            <transport clientCredentialType="None"/>
          </security>
        </binding>
      </webHttpBinding>

    </bindings>
    <services>
      <service name="MGI.Peripheral.Server.Impl.PeripheralServiceImpl" behaviorConfiguration="SvcBhvr">
        <host>
          <baseAddresses>
            <add baseAddress="https://localhost:18732/Peripheral/" />
          </baseAddresses>
        </host>
        <!--<endpoint address="" binding="basicHttpBinding" bindingConfiguration="soapBinding" 
			contract="MGI.Peripheral.Server.Contract.IPeripheralService" />-->
        <endpoint address="https://localhost:18732/Peripheral/" binding="webHttpBinding" behaviorConfiguration="EndPBhvr" bindingConfiguration="Bind1" contract="MGI.Peripheral.Server.Contract.IPeripheralService">
          <!--<identity>
            <dns value="localhost" />
          </identity>-->
        </endpoint>
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <endpointBehaviors>
        <behavior name="EndPBhvr">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="SvcBhvr">
          <serviceMetadata httpsGetEnabled="true" httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <!--<serviceHostingEnvironment aspNetCompatibilityEnabled="false" />-->
  </system.serviceModel>


  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Common.Logging" publicKeyToken="af08829b84f0328e" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-2.1.2.0" newVersion="2.1.2.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <appSettings>
    <add key="ScannerIsSimulator" value="false" />
    <add key="SimulatorImageDir" value="g:\tmp\images" />
    <add key="PrinterIsSimulator" value="false" />
    <add key="PrinterImageDir" value="g:\tmp\images" />
    <add key="PrinterLogoFile" value="g:\tmp\CarverReceiptLogo.bmp" />
    <add key="ClientSettingsProvider.ServiceUri" value="" />
    <add key="CheckPrinterIsSimulator" value="false" />
  </appSettings>
  <system.diagnostics>
    <trace autoflush="true" indentsize="4">
      <listeners>
        <add name="DMSLog" type="System.Diagnostics.TextWriterTraceListener" initializeData="DMSDebug.log" />
        <remove name="Default" />
      </listeners>
    </trace>
  </system.diagnostics>
  <system.web>
    <membership defaultProvider="ClientAuthenticationMembershipProvider">
      <providers>
        <add name="ClientAuthenticationMembershipProvider" type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" />
      </providers>
    </membership>
    <roleManager defaultProvider="ClientRoleProvider" enabled="true">
      <providers>
        <add name="ClientRoleProvider" type="System.Web.ClientServices.Providers.ClientRoleProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" serviceUri="" cacheTimeout="86400" />
      </providers>
    </roleManager>
  </system.web>
</configuration>